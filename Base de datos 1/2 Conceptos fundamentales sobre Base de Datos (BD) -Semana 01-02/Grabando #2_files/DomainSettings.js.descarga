'use strict';self.DomainSettings=function(){function d(a,b){b={recordingEnabled:h(a,b,"recorder"),pageIconEnabled:h(a,b,"page-icon"),previewEnabled:h(a,b,"preview"),linkExpandEnabled:h(a,b,"link-expand")};return a in g.settings?(a=g.settings[a],void 0===a.pageIconEnabled&&(a.pageIconEnabled=b.pageIconEnabled),a):b}function h(a,b,c){var e=Config.get().disabled;if(e)for(let f of e){a:{e=[f.matchDomain].concat(f.matchDomains);var m=a;if(e)for(let l of e)if(l&&(new RegExp(l)).test(m)){e=!0;break a}e=
!1}if(e||b&&f.matchLocation&&(new RegExp(f.matchLocation)).test(b))if(void 0===f.types||void 0===c||f.types.includes(c))return void 0!==f.enabled?f.enabled:!1}return!0}function k(a,b){g.settings[a]=b;Preferences.save("domainSettings",g.settings)}let g={settings:{},init:function(a){Preferences.load("domainSettings",g.settings,function(b){g.settings=b;a()})},getDomainRecordingEnabled:function(a,b){return d(a,b).recordingEnabled},getDomainPageIconEnabled:function(a,b){return d(a,b).pageIconEnabled},
getDomainPreviewEnabled:function(a,b){return d(a,b).previewEnabled},getDomainLinkExpandEnabled:function(a,b){return d(a,b).linkExpandEnabled},setDomainRecordingEnabled:function(a,b){let c=d(a);c.recordingEnabled=b;console.log("Saving recorderEnabled setting for domain: "+a+"(new setting: "+b+")");k(a,c)},setDomainPageIconEnabled:function(a,b){let c=d(a);c.pageIconEnabled=b;console.log("Saving pageIconEnabled setting for domain: "+a+"(new setting: "+b+")");k(a,c)},setDomainPreviewEnabled:function(a,
b){let c=d(a);c.previewEnabled=b;console.log("Saving previewEnabled setting for domain: "+a+"(new setting: "+b+")");k(a,c)},setDomainLinkExpandEnabled:function(a,b){let c=d(a);c.linkExpandEnabled=b;console.log("Saving linkExpandEnabled setting for domain: "+a+"(new setting: "+b+")");k(a,c)}};return g}();