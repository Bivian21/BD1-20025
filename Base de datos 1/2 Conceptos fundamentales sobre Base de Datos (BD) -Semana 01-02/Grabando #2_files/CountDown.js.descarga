'use strict';self.CountDown=function(){function c(){a.countDownCallback(a.numSec);0===a.numSec&&(a.runLocally?a.handle({countDown:"done"}):Utils.sendMessageToBackground({countDown:"done"}),a.currentTimeout=void 0);0<a.numSec&&(a.currentTimeout=setTimeout(function(){a.numSec--;c()},1E3))}let a={preStartup:!0,runLocally:!1,setCallback:function(b){a.countDownCallback=b},start:function(){a.countDownCallback&&(a.runLocally?a.handle({countDown:"starting"}):Utils.sendMessageToBackground({countDown:"starting"}),
a.numSec=3,c(),a.preStartup=!1)},inProgress:function(){return a.preStartup||void 0!==a.currentTimeout},cancel:function(){a.currentTimeout&&clearTimeout(a.currentTimeout);a.currentTimeout=void 0},handle:function(b){a.state=b.countDown;"done"===a.state&&a.whenReadyCallback&&(a.whenReadyCallback(),a.state=void 0)},whenReady:function(b){"done"===a.state?(a.state=void 0,b()):a.whenReadyCallback=b},byPass:function(){a.state="done"},setRunLocally:function(){a.runLocally=!0}};return a}();